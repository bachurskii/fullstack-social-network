import express from "express";
import { updateUserSubscriptionSchema, resendVerificationEmailSchema, } from "../schemas/userSchema.js";
import { register, login, logout, current, changeSubscription, changeAvatar, verifyEmail, resendVerifyEmail, } from "../controllers/userController.js";
import auth from "../helpers/auth.js";
import validateBody from "../helpers/validateBody.js";
import upload from "../middlewares/upload.js";
const userRouter = express.Router();
userRouter.post("/register", register);
userRouter.post("/login", login);
userRouter.post("/logout", auth, logout);
userRouter.get("/current", auth, current);
userRouter.patch("/", auth, validateBody(updateUserSubscriptionSchema), changeSubscription);
userRouter.patch("/avatars", auth, upload.single("avatar"), changeAvatar);
userRouter.get("/verify/:verificationToken", verifyEmail);
userRouter.post("/verify", validateBody(resendVerificationEmailSchema), resendVerifyEmail);
export default userRouter;
